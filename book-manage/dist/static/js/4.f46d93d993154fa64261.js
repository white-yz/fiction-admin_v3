webpackJsonp([4],{bG3r:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a=[{value:"北京",label:"北京"},{value:"天津",label:"天津"},{value:"河北",label:"河北"},{value:"山西",label:"山西"},{value:"内蒙古",label:"内蒙古"},{value:"辽宁",label:"辽宁"},{value:"吉林",label:"吉林"},{value:"黑龙江",label:"黑龙江"},{value:"上海",label:"上海"},{value:"江苏",label:"江苏"},{value:"浙江",label:"浙江"},{value:"安徽",label:"安徽"},{value:"福建",label:"福建"},{value:"江西",label:"江西"},{value:"山东",label:"山东"},{value:"河南",label:"河南"},{value:"湖北",label:"湖北"},{value:"湖南",label:"湖南"},{value:"广东",label:"广东"},{value:"广西",label:"广西"},{value:"海南",label:"海南"},{value:"重庆",label:"重庆"},{value:"四川",label:"四川"},{value:"贵州",label:"贵州"},{value:"云南",label:"云南"},{value:"西藏",label:"西藏"},{value:"陕西",label:"陕西"},{value:"甘肃",label:"甘肃"},{value:"青海",label:"青海"},{value:"宁夏",label:"宁夏"},{value:"新疆",label:"新疆"},{value:"香港",label:"香港"},{value:"澳门",label:"澳门"},{value:"台湾",label:"台湾"}]},gYEA:function(e,t){},uVhY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("BO1k"),r=i.n(a),l=i("gyMJ"),o=i("msXN"),n=i("bG3r"),s={mixins:[o.a],data:function(){return{centerDialogVisible:!1,editVisible:!1,delVisible:!1,registerForm:{username:"",password:"",name:"",sex:"",birth:"",location:"",introduction:""},form:{id:"",name:"",sex:"",birth:"",location:"",introduction:""},state:0,freezeVisible:!1,cities:n.a,tableData:[],tempData:[],select_word:"",pageSize:5,currentPage:1,idx:-1,multipleSelection:[]}},computed:{data:function(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},watch:{select_word:function(){if(""==this.select_word)this.tableData=this.tempData;else{this.tableData=[];var e=!0,t=!1,i=void 0;try{for(var a,l=r()(this.tempData);!(e=(a=l.next()).done);e=!0){var o=a.value;o.name.includes(this.select_word)&&this.tableData.push(o)}}catch(e){t=!0,i=e}finally{try{!e&&l.return&&l.return()}finally{if(t)throw i}}}}},created:function(){this.getData()},methods:{getData:function(){var e=this;this.tempData=[],this.tableData=[],Object(l.k)().then(function(t){e.tempData=t,e.tableData=t,console.log(e.tableData[0].id)})},addWriter:function(){var e=this,t=this.registerForm.birth,i=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),a=new URLSearchParams;a.append("name",this.registerForm.name),a.append("sex",this.registerForm.sex),a.append("pic","/img/writerPic/hhh.jpg"),a.append("birth",i),a.append("location",this.registerForm.location),a.append("introduction",this.registerForm.introduction),Object(l.q)(a).then(function(t){1==t.code?(e.getData(),e.notify("添加成功","success")):e.notify("添加失败","error")}).catch(function(e){console.log(e)}),this.centerDialogVisible=!1},uploadUrl:function(e){return this.$store.state.HOST+"/writer/updateWriterPic?id="+e},handleCurrentChange:function(e){this.currentPage=e},handleSizeChange:function(e){this.pageSize=e},handleEdit:function(e){this.editVisible=!0,this.form={id:e.id,name:e.name,sex:e.sex,birth:e.birth,location:e.location,introduction:e.introduction}},editSave:function(){var e=this,t=new Date(this.form.birth),i=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),a=new URLSearchParams;a.append("id",this.form.id),a.append("name",this.form.name),a.append("sex",this.form.sex),a.append("birth",i),a.append("location",this.form.location),a.append("introduction",this.form.introduction),Object(l.v)(a).then(function(t){1==t.code?(e.getData(),e.notify("修改成功","success")):e.notify("修改失败","error")}).catch(function(e){console.log(e)}),this.editVisible=!1},deleteRow:function(){var e=this;Object(l.f)(this.idx).then(function(t){t?(e.getData(),e.notify("删除成功","success")):e.notify("删除失败","error")}).catch(function(e){console.log(e)}),this.delVisible=!1},bookEdit:function(e,t){this.$router.push({path:"/Book",query:{id:e,name:t}})},handleState:function(e){this.freezeVisible=!0,this.state=e.state,this.id=e.id},handleStateUp:function(){var e=this,t=new URLSearchParams;t.append("id",this.id),t.append("state",1==this.state?0:1),Object(l.w)(t).then(function(t){t?(e.getData(),e.notify(1==e.state?"解冻成功":"冻结成功","success")):e.notify(1==e.state?"解冻失败":"冻结失败","error")}).catch(function(e){}),this.freezeVisible=!1}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"container",staticStyle:{"margin-bottom":"20px"}},[i("div",{staticClass:"handle-box"},[i("el-input",{staticClass:"handle-input",staticStyle:{float:"right"},attrs:{size:"small",placeholder:e.$t("writer.enterName")},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),i("el-button-group",[i("el-button",{staticClass:"iconfont icon-piliangshanchu",attrs:{type:"primary",size:"small"},on:{click:e.delAll}},[e._v(e._s(e.$t("common.batchDel")))]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v(e._s(e.$t("writer.addWriter")))])],1)],1)]),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"mini",height:"700px",data:e.data},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"42"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("writer.pic"),width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"writer-img"},[i("img",{staticStyle:{width:"100px"},attrs:{src:e.getUrl(t.row.pic),alt:""}})]),e._v(" "),i("el-upload",{attrs:{action:e.uploadUrl(t.row.id),"before-upload":e.beforeAvatorUpload,"on-success":e.handleAvatorSuccess}},[i("el-button",{attrs:{size:"mini",type:"primary",plain:""}},[e._v(e._s(e.$t("common.updatePic")))])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:"用户名",width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"password",label:"密码",width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:e.$t("writer.writerName"),width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.sex"),width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.changeSex(t.row.sex))+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.birth"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.attachBirth(t.row.birth))+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"location",label:e.$t("common.location"),width:"100",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.introduction")},scopedSlots:e._u([{key:"default",fn:function(t){return[i("p",{staticStyle:{height:"100px",overflow:"auto"}},[e._v(e._s(t.row.introduction))])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.state"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?i("el-tag",{attrs:{type:"success"}},[e._v("正常")]):i("el-tag",{attrs:{type:"danger"}},[e._v("已冻结")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.operation"),width:"230",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-document",circle:""},on:{click:function(i){return e.bookEdit(t.row.id,t.row.name)}}}),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(i){return e.handleEdit(t.row)}}}),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){return e.handleDelete(t.row.id)}}}),e._v(" "),0==t.row.state?i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-warning",circle:""},on:{click:function(i){return e.handleState(t.row)}}}):e._e(),e._v(" "),1==t.row.state?i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-success",circle:""},on:{click:function(i){return e.handleState(t.row)}}}):e._e()]}}])})],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pageSize,total:e.tableData.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("writer.addWriter"),visible:e.centerDialogVisible,width:"550px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"95px"}},[i("el-form-item",{attrs:{prop:"username",label:"用户名",size:"mini"}},[i("el-input",{attrs:{placeholder:"用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password",label:"密码",size:"mini"}},[i("el-input",{attrs:{placeholder:e.$t("writer.writerName")},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"name",label:e.$t("writer.writerName"),size:"mini"}},[i("el-input",{attrs:{placeholder:e.$t("writer.writerName")},model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("common.sex"),size:"mini"}},[i("el-radio-group",{model:{value:e.registerForm.sex,callback:function(t){e.$set(e.registerForm,"sex",t)},expression:"registerForm.sex"}},[i("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("common.woman")))]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("common.man")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("common.combination")))]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v(e._s(e.$t("common.unknown")))])],1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"birth",label:e.$t("common.birth"),size:"mini"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:e.$t("common.selectDate")},model:{value:e.registerForm.birth,callback:function(t){e.$set(e.registerForm,"birth",t)},expression:"registerForm.birth"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"location",label:e.$t("common.location"),size:"mini"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.location")},model:{value:e.registerForm.location,callback:function(t){e.$set(e.registerForm,"location",t)},expression:"registerForm.location"}},e._l(e.cities,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:e.$t("common.introduction"),size:"mini"}},[i("el-input",{attrs:{placeholder:e.$t("common.introduction"),type:"textarea"},model:{value:e.registerForm.introduction,callback:function(t){e.$set(e.registerForm,"introduction",t)},expression:"registerForm.introduction"}})],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.addWriter}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("writer.editWriter"),visible:e.editVisible,width:"550px",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"95px"}},[i("el-form-item",{attrs:{prop:"username",label:"用户名",size:"mini"}},[i("el-input",{attrs:{placeholder:"用户名"},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password",label:"密码",size:"mini"}},[i("el-input",{attrs:{placeholder:e.$t("writer.writerName")},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"name",label:e.$t("writer.writerName"),size:"mini"}},[i("el-input",{attrs:{placeholder:e.$t("writer.writerName")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("common.sex"),size:"mini"}},[i("el-radio-group",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[i("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("common.woman")))]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("common.man")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("common.combination")))]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v(e._s(e.$t("common.unknown")))])],1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"birth",label:e.$t("common.birth"),size:"mini"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:e.$t("common.selectDate")},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"location",label:e.$t("common.location"),size:"mini"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("common.location")},model:{value:e.registerForm.location,callback:function(t){e.$set(e.registerForm,"location",t)},expression:"registerForm.location"}},e._l(e.cities,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:e.$t("common.introduction"),size:"mini"}},[i("el-input",{attrs:{placeholder:e.$t("common.introduction"),type:"textarea"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.editSave}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("writer.delWriter"),visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[i("div",{attrs:{align:"center"}},[e._v(e._s(e.$t("common.delText")))]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.delVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.deleteRow}},[e._v(e._s(e.$t("common.confirm")))])],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.state&&e.$t("user.thaw")||e.$t("user.freeze"),visible:e.freezeVisible,width:"300px",center:""},on:{"update:visible":function(t){e.freezeVisible=t}}},[i("div",{attrs:{align:"center"}},[e._v(e._s(e.state&&e.$t("common.thawText")||e.$t("common.freezeText")))]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.freezeVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.handleStateUp}},[e._v(e._s(e.$t("common.confirm")))])],1)])],1)},staticRenderFns:[]};var m=i("VU/8")(s,c,!1,function(e){i("gYEA")},"data-v-104f0d84",null);t.default=m.exports}});
//# sourceMappingURL=4.f46d93d993154fa64261.js.map