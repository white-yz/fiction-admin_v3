webpackJsonp([3],{D3eR:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("BO1k"),o=i.n(a),r=i("gyMJ"),l=i("msXN"),n=i("bG3r"),s={mixins:[l.a],data:function(){return{centerDialogVisible:!1,editVisible:!1,delVisible:!1,freezeVisible:!1,state:0,id:0,registerForm:{username:"",password:"",sex:"1",phoneNum:"",email:"",birth:"",introduction:"",location:""},cities:n.a,form:{id:"",username:"",password:"",sex:"",phoneNum:"",email:"",birth:"",introduction:"",location:""},tableData:[],tempData:[],select_word:"",pageSize:5,currentPage:1,idx:-1,multipleSelection:[],rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],phoneNum:[{required:!0,message:"请输入手机号",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的电子邮箱地址",trigger:["blur","change"]}],introduction:[{required:!0,message:"请输入签名",trigger:"blur"}],location:[{required:!0,message:"请输入地区",trigger:"blur"}]}}},computed:{data:function(){return this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},watch:{select_word:function(){if(""==this.select_word)this.tableData=this.tempData;else{this.tableData=[];var e=!0,t=!1,i=void 0;try{for(var a,r=o()(this.tempData);!(e=(a=r.next()).done);e=!0){var l=a.value;l.username.includes(this.select_word)&&this.tableData.push(l)}}catch(e){t=!0,i=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw i}}}}},created:function(){this.getData()},methods:{handleCurrentChange:function(e){this.currentPage=e},handleSizeChange:function(e){this.pageSize=e},getData:function(){var e=this;this.tempData=[],this.tableData=[],Object(r.j)().then(function(t){e.tempData=t,e.tableData=t,e.currentPage=1})},addConsumer:function(){var e=this;this.$refs.registerForm.validate(function(t){if(t){var i=e.registerForm.birth,a=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),o=new URLSearchParams;o.append("username",e.registerForm.username),o.append("password",e.registerForm.password),o.append("sex",e.registerForm.sex),o.append("phoneNum",e.registerForm.phoneNum),o.append("email",e.registerForm.email),o.append("birth",a),o.append("introduction",e.registerForm.introduction),o.append("location",e.registerForm.location),o.append("avator","/img/user.jpg"),Object(r.o)(o).then(function(t){1==t.code?(e.getData(),e.notify("添加成功","success")):e.notify("添加失败","error")}).catch(function(e){console.log(e)}),e.centerDialogVisible=!1}})},handleEdit:function(e){this.editVisible=!0,this.form={id:e.id,username:e.username,password:e.password,sex:e.sex,phoneNum:e.phoneNum,email:e.email,birth:e.birth,introduction:e.introduction,location:e.location}},editSave:function(){var e=this;this.$refs.form.validate(function(t){if(t){var i=new Date(e.form.birth),a=i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate(),o=new URLSearchParams;o.append("id",e.form.id),o.append("username",e.form.username),o.append("password",e.form.password),o.append("sex",e.form.sex),o.append("phoneNum",e.form.phoneNum),o.append("email",e.form.email),o.append("birth",a),o.append("introduction",e.form.introduction),o.append("location",e.form.location),Object(r.s)(o).then(function(t){1==t.code?(e.getData(),e.notify("修改成功","success")):e.notify("修改失败","error")}).catch(function(e){console.log(e)}),e.editVisible=!1}})},uploadUrl:function(e){return this.$store.state.HOST+"/consumer/updateConsumerPic?id="+e},deleteRow:function(){var e=this;Object(r.d)(this.idx).then(function(t){t?(e.getData(),e.notify("删除成功","success")):e.notify("删除失败","error")}).catch(function(e){console.log(e)}),this.delVisible=!1},getCollect:function(e){this.$router.push({path:"/collect",query:{id:e}})},handleState:function(e){this.freezeVisible=!0,this.state=e.state,this.id=e.id},handleStateUp:function(){var e=this,t=new URLSearchParams;t.append("id",this.id),t.append("state",1==this.state?0:1),Object(r.t)(t).then(function(t){t?(e.getData(),e.notify(1==e.state?"解冻成功":"冻结成功","success")):e.notify(1==e.state?"解冻失败":"冻结失败","error")}).catch(function(e){}),this.freezeVisible=!1}}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"container",staticStyle:{"margin-bottom":"20px"}},[i("div",{staticClass:"handle-box"},[i("el-input",{staticClass:"handle-input",staticStyle:{float:"right"},attrs:{size:"small",placeholder:e.$t("user.enterName")},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),i("el-button-group",[i("el-button",{staticClass:"iconfont icon-piliangshanchu",attrs:{type:"primary",size:"small"},on:{click:e.delAll}},[e._v(e._s(e.$t("common.batchDel")))]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:function(t){e.centerDialogVisible=!0}}},[e._v(e._s(e.$t("user.add")))])],1)],1)]),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{size:"mini",height:"680px",data:e.data},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"42"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("user.pic"),width:"110",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticClass:"consumer-img"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.getUrl(t.row.avator)}})]),e._v(" "),i("el-upload",{attrs:{action:e.uploadUrl(t.row.id),"before-upload":e.beforeAvatorUpload,"on-success":e.handleAvatorSuccess}},[i("el-button",{attrs:{size:"mini"}},[e._v(e._s(e.$t("common.updatePic")))])],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"username",label:e.$t("user.Name"),width:"110",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.sex"),width:"62",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.changeSex(t.row.sex))+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"phoneNum",label:e.$t("common.phone"),width:"106",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"email",label:e.$t("common.email"),width:"190",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.birth"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.attachBirth(t.row.birth))+"\n            ")]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"introduction",label:e.$t("common.signature"),align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"location",label:e.$t("common.location"),width:"75",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.state"),width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.state?i("el-tag",{attrs:{type:"success"}},[e._v("正常")]):i("el-tag",{attrs:{type:"danger"}},[e._v("已冻结")])]}}])}),e._v(" "),i("el-table-column",{attrs:{label:e.$t("common.operation"),width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"warning",size:"mini",icon:"icon-shoucang iconfont",circle:""},on:{click:function(i){return e.getCollect(e.data[t.$index].id)}}}),e._v(" "),i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(i){return e.handleEdit(t.row)}}}),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(i){return e.handleDelete(t.row.id)}}}),e._v(" "),0==t.row.state?i("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-warning",circle:""},on:{click:function(i){return e.handleState(t.row)}}}):e._e(),e._v(" "),1==t.row.state?i("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-success",circle:""},on:{click:function(i){return e.handleState(t.row)}}}):e._e()]}}])})],1),e._v(" "),i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.currentPage,"page-sizes":[5,10,15,20],"page-size":e.pageSize,total:e.tableData.length},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("user.add"),visible:e.centerDialogVisible,width:"550px",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("el-form",{ref:"registerForm",attrs:{model:e.registerForm,"label-width":"120px",rules:e.rules}},[i("el-form-item",{attrs:{prop:"username",label:e.$t("user.Name"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("user.Name")},model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password",label:e.$t("common.pwd"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{type:"password",placeholder:e.$t("common.pwd")},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("common.sex"),size:"mini"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.sex,expression:"registerForm.sex"}],attrs:{type:"radio",name:"sex",value:"0"},domProps:{checked:e._q(e.registerForm.sex,"0")},on:{change:function(t){return e.$set(e.registerForm,"sex","0")}}}),e._v(" "+e._s(e.$t("common.woman"))+"  \n                "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.sex,expression:"registerForm.sex"}],attrs:{type:"radio",name:"sex",value:"1"},domProps:{checked:e._q(e.registerForm.sex,"1")},on:{change:function(t){return e.$set(e.registerForm,"sex","1")}}}),e._v(" "+e._s(e.$t("common.man"))+"\n            ")]),e._v(" "),i("el-form-item",{attrs:{prop:"phoneNum",label:e.$t("common.phone"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.phone")},model:{value:e.registerForm.phoneNum,callback:function(t){e.$set(e.registerForm,"phoneNum",t)},expression:"registerForm.phoneNum"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"email",label:e.$t("common.email"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.email")},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"birth",label:e.$t("common.birth"),size:"mini"}},[i("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",placeholder:e.$t("common.selectDate")},model:{value:e.registerForm.birth,callback:function(t){e.$set(e.registerForm,"birth",t)},expression:"registerForm.birth"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:e.$t("common.signature"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.signature")},model:{value:e.registerForm.introduction,callback:function(t){e.$set(e.registerForm,"introduction",t)},expression:"registerForm.introduction"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"location",label:e.$t("common.location"),size:"mini"}},[i("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.location")},model:{value:e.registerForm.location,callback:function(t){e.$set(e.registerForm,"location",t)},expression:"registerForm.location"}},e._l(e.cities,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.addConsumer}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("user.edit"),visible:e.editVisible,width:"550px",center:""},on:{"update:visible":function(t){e.editVisible=t}}},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[i("el-form-item",{attrs:{prop:"username",label:e.$t("user.Name"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("user.Name")},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"password",label:e.$t("common.pwd"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{type:"password",placeholder:e.$t("common.pwd")},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("common.sex"),size:"mini"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sex,expression:"form.sex"}],attrs:{type:"radio",name:"sex",value:"0"},domProps:{checked:e._q(e.form.sex,"0")},on:{change:function(t){return e.$set(e.form,"sex","0")}}}),e._v(" "+e._s(e.$t("common.woman"))+"  \n                "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sex,expression:"form.sex"}],attrs:{type:"radio",name:"sex",value:"1"},domProps:{checked:e._q(e.form.sex,"1")},on:{change:function(t){return e.$set(e.form,"sex","1")}}}),e._v(" "+e._s(e.$t("common.man"))+"\n            ")]),e._v(" "),i("el-form-item",{attrs:{prop:"phoneNum",label:e.$t("common.phone"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.phone")},model:{value:e.form.phoneNum,callback:function(t){e.$set(e.form,"phoneNum",t)},expression:"form.phoneNum"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"email",label:e.$t("common.email"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.email")},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"birth",label:e.$t("common.birth"),size:"mini"}},[i("el-date-picker",{staticStyle:{width:"90%"},attrs:{type:"date",placeholder:e.$t("common.selectDate")},model:{value:e.form.birth,callback:function(t){e.$set(e.form,"birth",t)},expression:"form.birth"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"introduction",label:e.$t("common.signature"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.signature")},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"location",label:e.$t("common.location"),size:"mini"}},[i("el-input",{staticStyle:{width:"90%"},attrs:{placeholder:e.$t("common.location")},model:{value:e.form.location,callback:function(t){e.$set(e.form,"location",t)},expression:"form.location"}})],1)],1),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.editSave}},[e._v(e._s(e.$t("common.confirm")))])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.$t("user.del"),visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[i("div",{attrs:{align:"center"}},[e._v(e._s(e.$t("common.delText")))]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.delVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.deleteRow}},[e._v(e._s(e.$t("common.confirm")))])],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.state&&e.$t("user.thaw")||e.$t("user.freeze"),visible:e.freezeVisible,width:"300px",center:""},on:{"update:visible":function(t){e.freezeVisible=t}}},[i("div",{attrs:{align:"center"}},[e._v(e._s(e.state&&e.$t("common.thawText")||e.$t("common.freezeText")))]),e._v(" "),i("span",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:function(t){e.freezeVisible=!1}}},[e._v(e._s(e.$t("common.cancel")))]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:e.handleStateUp}},[e._v(e._s(e.$t("common.confirm")))])],1)])],1)},staticRenderFns:[]};var m=i("VU/8")(s,c,!1,function(e){i("bSSG")},"data-v-66045674",null);t.default=m.exports},bG3r:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var a=[{value:"北京",label:"北京"},{value:"天津",label:"天津"},{value:"河北",label:"河北"},{value:"山西",label:"山西"},{value:"内蒙古",label:"内蒙古"},{value:"辽宁",label:"辽宁"},{value:"吉林",label:"吉林"},{value:"黑龙江",label:"黑龙江"},{value:"上海",label:"上海"},{value:"江苏",label:"江苏"},{value:"浙江",label:"浙江"},{value:"安徽",label:"安徽"},{value:"福建",label:"福建"},{value:"江西",label:"江西"},{value:"山东",label:"山东"},{value:"河南",label:"河南"},{value:"湖北",label:"湖北"},{value:"湖南",label:"湖南"},{value:"广东",label:"广东"},{value:"广西",label:"广西"},{value:"海南",label:"海南"},{value:"重庆",label:"重庆"},{value:"四川",label:"四川"},{value:"贵州",label:"贵州"},{value:"云南",label:"云南"},{value:"西藏",label:"西藏"},{value:"陕西",label:"陕西"},{value:"甘肃",label:"甘肃"},{value:"青海",label:"青海"},{value:"宁夏",label:"宁夏"},{value:"新疆",label:"新疆"},{value:"香港",label:"香港"},{value:"澳门",label:"澳门"},{value:"台湾",label:"台湾"}]},bSSG:function(e,t){}});
//# sourceMappingURL=3.7e4273db8b46b248324f.js.map